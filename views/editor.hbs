<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <link rel="stylesheet" href="/resources/css/lib/bootstrap.min.css">
    <script src="/resources/js/lib/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="/resources/js/lib/grapes.min.js"></script>
    <script src="/resources/grapesjs-navbar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="/resources/js/lib/grapesjs-style-bg.min.js"></script>
    <script src="/resources/js/lib/grapesjs-tabs.min.jfs"></script>
    <script src="/resources/js/lib/grapesjs-blocks-bootstrap4.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
        integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    {{!--
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script> --}}
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
        integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/resources/css/lib/grapes.min.css">
    <link rel="stylesheet" href="/resources/css/main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

    {{!--
    <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
    <link href="https://unpkg.com/grapesjs-project-manager/dist/grapesjs-project-manager.min.css" rel="stylesheet">
    <script src="https://unpkg.com/browse/grapesjs@0.15.3/src/"></script>
    <script src="https://unpkg.com/grapesjs-project-manager"></script> --}}



    <script src="/resources/js/lib/grapesjs-blocks-basic.js"></script>

    <script src="resources/js/lib/grapesjs-plugin-forms.min.js"></script>
</head>

<body>
    <div>
        <div id="navbar" class="sidenav d-flex flex-column overflow-scroll">
            <nav class="navbar navbar-light">
                <div class="container-fluid">
                    <span class="navbar-brand mb-0 h3 logo">
                        AB SUITE CANVAS
                    </span>
                </div>

            </nav>
            {{!-- <div class="my-2 d-flex flex-column"> --}}
                {{!-- <button type="button" class="btn btn-outline-secondary btn-sm mx-2" data-bs-toggle="modal"
                    data-bs-target="#addPageModal">
                    <i class="bi bi-file-earmark-plus"></i>Add Page
                </button> --}}
                {{!-- </div> --}}
            <div>
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="block-tab" data-bs-toggle="tab" data-bs-target="#block"
                            type="button" role="tab" aria-selected="true" aria-controls="block">
                            <i class="bi bi-grid-fill">

                            </i>

                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="layer-tab" data-bs-toggle="tab" data-bs-target="#layer"
                            type="button" role="tab" aria-selected="false" aria-controls="layer">
                            <i class="bi bi-layers-fill">

                            </i>

                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="style-tab" data-bs-toggle="tab" data-bs-target="#style"
                            type="button" role="tab" aria-selected="false" aria-controls="style">
                            <i class="bi bi-palette-fill">

                            </i>

                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="trait-tab" data-bs-toggle="tab" data-bs-target="#trait"
                            type="button" role="tab" aria-controls="trait" aria-selected="false">
                            <i class="bi bi-gear-fill"></i>
                        </button>
                    </li>


                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="block" role="tabpanel" aria-labelledby="block-tab">
                        <div id="blocks">

                        </div>

                    </div>
                    <div class="tab-pane fade" id="layer" role="tabpanel" aria-labelledby="layer-tab">
                        <div id="layer-container"></div>


                    </div>

                    <div class="tab-pane fade" id="style" role="tabpanel" aria-labelledby="style-tab">
                        <div id="style-view"></div>

                    </div>
                    <div class="tab-pane fade" id="trait" role="tabpanel" aria-labelledby="trait-tab">
                        <div id="trait-container"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content" id="main-content">
            <input class="code-btn" type="button" onclick="code()" value="Save">
            <nav class="navbar navbar-light">
                <div class="container-fluid">
                    <input class="code-btn" type="button" onclick="openSaveObjModal()" value="Create Object" style="margin-left: 10%">
                    
                    <div class="panel__devices"></div>
                    <div class="panel__basic-action"></div>
                    <div class="panel__editor"></div>
                </div>
            </nav>
            <div id="editor"></div>

        </div>

        {{!-- <a href="#" class="btn btn-lg btn-primary" id="sentMessage" data-toggle="modal" data-target="#largeModal" style="margin-left: 20%">Click to open Modal</a> --}}
        <div class="modal fade" id="largeModal" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onClick="closeModal()">&times;</button>
                    
                </div>
                <div class="modal-body">
                    <table>
                        <tr>
                            <td><h4>Object Name</h4></td>
                            <td><input type="text" id="objId"></td>
                        </tr>
                    </table>
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" onClick="closeModal()">Close</button>
                    <button type="button" class="btn btn-primary" onclick="saveObj()">Save changes</button>
                </div>
                </div>
            </div>
        </div>

        {{!-- <button onclick="addPage()" style="margin-left: 15%;">Add page</button> --}}
        <div class="app-wrap">
            <!-- Vue app for pages -->
            <div class="pages-wrp">
                <div class="add-page"  data-bs-toggle="modal" data-bs-target="#addPageModal">Add new
                    page</div>
                <div class="pages" id="name_holder1">
                    <div v-for="page in pages" :key="page.id" :class="{page: 1, selected: isSelected(page) }"
                        @click="selectPage(page.id, event)" :id="page.id" :name="page.name">
                        \{{page.id}}
                        <span v-if="!isSelected(page)" @click="removePage(page.id)" class="page-close">&Cross;</span>
                    </div>
                    

                </div>
                <div class="modal fade" id="addPageModal" tabindex="-1" aria-labelledby="addPageModalLabel"
                    aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <form id="create-page" novalidate onsubmit="return validateForm(event)">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="addPageModalLabel">Create Page</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"
                                        onclick="clearForm()"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="col-auto">
                                        <label class="form-label" for="name">Name</label>
                                        <input type="text" name="name" id="name" class="form-control form-control-sm"
                                            placeholder="Enter the page name" required />
                                        <div class="invalid-feedback">
                                            Please provide a valid name
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal"
                                        onclick="clearForm()">Close</button>
                                    <button type="submit" class="btn btn-primary btn-sm" onclick="addNewPage()">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="renamePageModal" tabindex="-1" aria-labelledby="renamePageModalLabel"
                    aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <form id="rename-page" novalidate onsubmit="return validateForm(event)">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="renamePageModalLabel">Rename Page</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"
                                        onclick="clearForm()"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="col-auto">
                                        <label class="form-label" for="name">Name</label>
                                        <input type="text" name="rename" id="rename" class="form-control form-control-sm"
                                            placeholder="Enter the page name" required />
                                        <div class="invalid-feedback">
                                            
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal"
                                        onclick="clearForm()">Close</button>
                                    <button type="submit" class="btn btn-primary btn-sm" onclick="renamePage()">Rename</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
            <div class="editor-wrap">
                <div id="gjs"></div>
            </div>
        </div>



        <script type="text/javascript" src="/resources/js/custom.js"></script>
        <script type="text/javascript" src="/resources/js/main.js"></script>
        <script type="text/javascript" src="/resources/js/preview.js"></script>

    </div>

</body>

</html>